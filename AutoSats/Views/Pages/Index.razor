@page "/"
@inject IExchangeScheduler scheduler

@if (!exchangeSchedules.Any())
{
    <NoSchedules />
}
else if (exchangeSchedules.Length > 1)
{
    <MultipleSchedules ExchangeSchedules="exchangeSchedules" />
}
else
{
    <SingleSchedule ScheduleId="exchangeSchedules[0].Id" ScheduleDeleted="SingleScheduleDeleted" />
}

@code
{
    private ExchangeScheduleSummary[] exchangeSchedules { get; set; } = Array.Empty<ExchangeScheduleSummary>();

    private Task SingleScheduleDeleted()
    {
        return InitializeSchedulesAsync();
    }

    private async Task InitializeSchedulesAsync()
    {
        var schedules = await scheduler.ListSchedulesAsync();
        exchangeSchedules = schedules.ToArray();
    }

    protected override Task OnInitializedAsync()
    {
        return InitializeSchedulesAsync();
    }
}
